<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Logo Tracer Cepat</title>
<style>
  body { font-family: sans-serif; text-align: center; padding: 20px; }
  img, svg { border: 1px solid #ccc; margin: 10px; max-width: 300px; }
  #output { margin-top: 20px; }
  button { padding: 8px 16px; margin: 5px; }
</style>
</head>
<body>

<h1>Logo Tracer Cepat</h1>

<input type="file" id="fileInput" accept="image/png, image/jpeg"><br>
<img id="preview" alt="Preview Gambar" style="display:none;"><br>

<button id="generateBtn" disabled>Generate SVG</button>
<button id="downloadBtn" style="display:none;">Download SVG</button>

<div id="output"></div>

<script src="https://cdn.jsdelivr.net/gh/jankovicsandras/imagetracerjs@latest/imagetracer_v1.2.8.js"></script>
<script>
const fileInput = document.getElementById('fileInput');
const preview = document.getElementById('preview');
const generateBtn = document.getElementById('generateBtn');
const downloadBtn = document.getElementById('downloadBtn');
const output = document.getElementById('output');
const maxSize = 150;

let imgDataURL = null;
let svgString = null;

fileInput.addEventListener('change', function(e){
  const file = e.target.files[0];
  if (!file) return;
  
  const reader = new FileReader();
  reader.onload = function(event){
    imgDataURL = event.target.result;
    preview.src = imgDataURL;
    preview.style.display = 'inline-block';
    generateBtn.disabled = false;
  }
  reader.readAsDataURL(file);
});

generateBtn.addEventListener('click', function(){
  const img = new Image();
  img.onload = function(){
    const scale = Math.min(maxSize / img.width, maxSize / img.height, 1);
    const w = img.width * scale;
    const h = img.height * scale;
    
    const canvas = document.createElement('canvas');
    canvas.width = w;
    canvas.height = h;
    const ctx = canvas.getContext('2d');
    ctx.filter = 'grayscale(100%) brightness(200%)';
    ctx.drawImage(img, 0, 0, w, h);
    
    const options = {
      scale:1, ltres:10, qtres:10, pathomit:8,
      numberofcolors:2, strokewidth:1, roundcoords:1, linefilter:true
    };
    
    output.innerHTML = '<p>Tracing...</p>';
    
    setTimeout(()=>{
      svgString = ImageTracer.imagedataToSVG(ImageTracer.getImgdata(canvas), options);
      output.innerHTML = svgString;
      downloadBtn.style.display = 'inline-block';
    }, 10);
  }
  img.src = imgDataURL;
});

downloadBtn.addEventListener('click', function(){
  if (!svgString) return;
  const blob = new Blob([svgString], {type: 'image/svg+xml'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'traced-logo.svg';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
});
</script>

</body>
</html>
